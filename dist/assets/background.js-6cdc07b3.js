import{g as d}from"./utils-4c3eb42e.js";let o="contexts",i={title:"",description:""},n=!1;chrome.runtime.onMessage.addListener((t,r,a)=>{if(t.action==="openSidePanel"&&(o=t.contentType,n=!0,t.notifySidePanel&&chrome.runtime.sendMessage({action:"updateSidebarContentType",contentType:o}),chrome.sidePanel.setOptions({enabled:!0}),chrome.sidePanel.open({windowId:r.tab.windowId,tabId:r.tab.id})),t.action==="closeSidePanel"&&(n=!1,chrome.sidePanel.setOptions({enabled:!1})),t.action==="getSidebarState"&&a({contentType:o,isSidePanelOpen:n}),t.action==="scrappedPageData"&&(i=t.pageData,chrome.runtime.sendMessage({action:"updatePageData"})),t.action==="getPageData"&&a({pageData:i}),t.action==="getContexts")return(async()=>{try{const e=await d();a({data:e,error:null})}catch(e){console.error("Error getting contexts from DB",e),a({data:[],error:"Error getting contexts from DB"})}})(),!0;t.action==="informModalToRefetchContexts"&&chrome.tabs.query({},e=>{e.forEach(c=>{chrome.tabs.sendMessage(c.id,{action:"refetchContexts"})})})});
